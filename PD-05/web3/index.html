<!DOCTYPE html>
<!DOCTYPE html>
<head>
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' rel='stylesheet' type='text/css'>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
    <script src="https://unpkg.com/web3@latest/dist/web3.min.js"></script>
	<script src="index.js"></script>
   </head>
<html>
<body>
<main>
    <h1 class="titel">Send ethereum</h1>
	<div class="fnContainer_2LE5C3"><div class="view_2LE5C3 function_2LE5C3"><div class="title_2LE5C3"><a title="This function is a VIEW FUNCTION (a call), which returns information from the Ethereum network and costs no gas (it's free)." class="fnName_2LE5C3"><div class="name_2LE5C3">balances</div></a></div><ul class="visible_2LE5C3">
            <div class="inputContainer_2LE5C3"><div title="data type: address" class="inputParam_2LE5C3">key</div><div class="inputFields_2LE5C3"><div class="addressField_2LE5C3"><input data-type="address" placeholder="0x633..." class="inputField_2LE5C3"></div></div><div class="output_2LE5C3"></div></div><div class="send_2LE5C3"><i class="icon_2LE5C3 fa fa-arrow-circle-right"></i></div></ul></div></div><div class="fnContainer_2LE5C3"><div class="payable_2LE5C3 function_2LE5C3"><div class="title_2LE5C3"><a title="This function is a PAYABLE FUNCTION, which enables to send ETH while being called. This type of function will cost you gas (execution fee)." class="fnName_2LE5C3"><div class="name_2LE5C3">sendToken</div></a></div><ul class="visible_2LE5C3"><div class="inputContainer_1qdaxD"><div title="data type: payable" class="title_1qdaxD">value</div><div class="inputArea_1qdaxD"><input placeholder="999" class="input_1qdaxD"><select class="currency_1qdaxD"><option value="wei">wei</option><option value="k-wei">k-wei</option><option value="m-wei">m-wei</option><option value="g-wei">g-wei</option><option value="micro">micro</option><option value="milli">milli</option><option value="ether">ether</option><option value="k-ether">k-ether</option><option value="m-ether">m-ether</option><option value="g-ether">g-ether</option><option value="t-ether">t-ether</option></select></div><div title="Select amount you want to send with this function!" class="ethIcon_1qdaxD"><i class="fab fa-ethereum"></i></div></div><div class="send_2LE5C3"><i class="icon_2LE5C3 fa fa-arrow-circle-right"></i></div></ul></div></div>
  <button value="sendToken" type="button" onClick='sendToken()'>Send now</button> 
              </div>

<script type="text/javascript">
        
            var contract = await web3.eth.requestAccounts();
            const contractSimple = "0xf08543132F665B284aBDdA18c195fDF67018b0d2"
            const SimpleContractABI = [
                {
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "Received",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "Sent",
		"type": "event"
	},
	{
		"inputs": [],
		"name": "Receive",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "balances",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "receiver",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "send",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "user",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
       
	 async function sendToken() { 
            web3 = new Web3(Web3.givenProvider); // provider from metamask         

            log(`Version of web3.js: ${web3.version}`);            
            var result=await web3.eth.requestAccounts().catch(x=>log(x.message));
            log(`Value from eth_requestAccounts: ${JSON.stringify(result)}`);
            var acts=await web3.eth.getAccounts().catch(log);
            log(`Here are the accounts: ${JSON.stringify(acts)}`);
            
            var fromadr=acts[0];
            toadr="0x356D3d2e3dd533E1293087e73c2C36D91337d0c6";
            log(`fromadr ${fromadr} has ${Web3.utils.fromWei( 
                await web3.eth.getBalance(fromadr), 'ether')} ether` );
            log(`toadr    ${toadr} has ${Web3.utils.fromWei ( 
                await web3.eth.getBalance(toadr), 'ether')} ether` );
            log(`Transfering 0.01 ether`);
            obj= await web3.eth.sendTransaction({
                from: fromadr,
                to: toadr,
                value: Web3.utils.toWei('0.01', 'ether')
            }).catch(x=>log(x.message));
            log(`Stored in block ${obj.blockNumber}`)
            log(`fromadr ${fromadr} has ${Web3.utils.fromWei ( 
                await web3.eth.getBalance(fromadr), 'ether')} ether` );
            log(`toadr    ${toadr} has ${Web3.utils.fromWei ( 
                await web3.eth.getBalance(toadr), 'ether')} ether` );
        }
        window.addEventListener('DOMContentLoaded', f); 
    </body>
</html>
